# 마인카트 없으면 소환
$execute unless entity @e[type=item_display, tag=tool.ui$(id)] run summon item_display ~ ~1.5 ~ {Tags:["tool.ui",  "tool.ui$(id)"], teleport_duration:0, Passengers:[{id:"chest_minecart", Tags:["tool.ui", "tool.ui$(id)"], Silent:true, Invulnerable:true}]}

# 버튼 감지
$execute store success storage tool:data player[$(id)]."shader.change" int 1 run data modify storage tool:data player[$(id)]."shader.previous" set from entity @n[tag=tool.ui$(id), type=chest_minecart] Items
$item replace entity @n[tag=tool.ui$(id), type=chest_minecart] container.0 from entity @s player.cursor
$execute if data storage tool:data player[{id:$(id), shader.change:1}] run function tool:execute with entity @n[tag=tool.ui$(id), type=chest_minecart] Items[{Slot:0b}].components."minecraft:custom_data".tool
clear @s barrier[custom_data~{tool:{}}]

# 페이지 따라 다른 UI 설정
$execute if data storage tool:data player[{id:$(id), shader.page:"effect"}] run data modify entity @n[tag=tool.ui$(id), type=chest_minecart] Items append value {Slot:0b, id:"barrier", count:1, components:{item_model: "tool:gui/effect", custom_data:{tool:{cmd:"data merge storage tool:data {global:{shader_id:'00'}}"}}, item_name:'{"text":"셰이더 끄기"}'}}

$execute if data storage tool:data player[{id:$(id)}] run data modify entity @n[tag=tool.ui$(id), type=chest_minecart] Items append value {Slot:1b, id:"barrier", count:1, components:{item_model: "tool:none", custom_data:{tool:{cmd:"data merge storage tool:data {global:{shader_id:'99'}}"}}, item_name:'{"text":"안개"}'}}

$execute if data storage tool:data player[{id:$(id), shader.page:"effect"}] run data modify entity @n[tag=tool.ui$(id), type=chest_minecart] Items append value {Slot:9b, id:"barrier", count:1, components:{item_model: "tool:none", custom_data:{tool:{cmd:"data merge storage tool:data {global:{shader_id:'01'}}"}}, item_name:'{"text":"색 반전"}'}}
$execute if data storage tool:data player[{id:$(id), shader.page:"effect"}] run data modify entity @n[tag=tool.ui$(id), type=chest_minecart] Items append value {Slot:10b, id:"barrier", count:1, components:{item_model: "tool:none", custom_data:{tool:{cmd:"data merge storage tool:data {global:{shader_id:'02'}}"}}, item_name:'{"text":"흑백"}'}}
$execute if data storage tool:data player[{id:$(id), shader.page:"effect"}] run data modify entity @n[tag=tool.ui$(id), type=chest_minecart] Items append value {Slot:11b, id:"barrier", count:1, components:{item_model: "tool:none", custom_data:{tool:{cmd:"data merge storage tool:data {global:{shader_id:'03'}}"}}, item_name:'{"text":"세피아"}'}}
$execute if data storage tool:data player[{id:$(id), shader.page:"effect"}] run data modify entity @n[tag=tool.ui$(id), type=chest_minecart] Items append value {Slot:12b, id:"barrier", count:1, components:{item_model: "tool:none", custom_data:{tool:{cmd:"data merge storage tool:data {global:{shader_id:'04'}}"}}, item_name:'{"text":"좌우 반전"}'}}
$execute if data storage tool:data player[{id:$(id), shader.page:"effect"}] run data modify entity @n[tag=tool.ui$(id), type=chest_minecart] Items append value {Slot:13b, id:"barrier", count:1, components:{item_model: "tool:none", custom_data:{tool:{cmd:"data merge storage tool:data {global:{shader_id:'05'}}"}}, item_name:'{"text":"상하 반전"}'}}
$execute if data storage tool:data player[{id:$(id), shader.page:"effect"}] run data modify entity @n[tag=tool.ui$(id), type=chest_minecart] Items append value {Slot:14b, id:"barrier", count:1, components:{item_model: "tool:none", custom_data:{tool:{cmd:"data merge storage tool:data {global:{shader_id:'06'}}"}}, item_name:'{"text":"모자이크"}'}}
$execute if data storage tool:data player[{id:$(id), shader.page:"effect"}] run data modify entity @n[tag=tool.ui$(id), type=chest_minecart] Items append value {Slot:15b, id:"barrier", count:1, components:{item_model: "tool:none", custom_data:{tool:{cmd:"data merge storage tool:data {global:{shader_id:'07'}}"}}, item_name:'{"text":"현기증"}'}}
$execute if data storage tool:data player[{id:$(id), shader.page:"effect"}] run data modify entity @n[tag=tool.ui$(id), type=chest_minecart] Items append value {Slot:16b, id:"barrier", count:1, components:{item_model: "tool:none", custom_data:{tool:{cmd:"data merge storage tool:data {global:{shader_id:'08'}}"}}, item_name:'{"text":"밝게"}'}}
$execute if data storage tool:data player[{id:$(id), shader.page:"effect"}] run data modify entity @n[tag=tool.ui$(id), type=chest_minecart] Items append value {Slot:17b, id:"barrier", count:1, components:{item_model: "tool:none", custom_data:{tool:{cmd:"data merge storage tool:data {global:{shader_id:'09'}}"}}, item_name:'{"text":"어둡게"}'}}
$execute if data storage tool:data player[{id:$(id), shader.page:"effect"}] run data modify entity @n[tag=tool.ui$(id), type=chest_minecart] Items append value {Slot:18b, id:"barrier", count:1, components:{item_model: "tool:none", custom_data:{tool:{cmd:"data merge storage tool:data {global:{shader_id:'10'}}"}}, item_name:'{"text":"비디오 테이프"}'}}
$execute if data storage tool:data player[{id:$(id), shader.page:"effect"}] run data modify entity @n[tag=tool.ui$(id), type=chest_minecart] Items append value {Slot:19b, id:"barrier", count:1, components:{item_model: "tool:none", custom_data:{tool:{cmd:"data merge storage tool:data {global:{shader_id:'11'}}"}}, item_name:'{"text":"오류"}'}}
$execute if data storage tool:data player[{id:$(id), shader.page:"effect"}] run data modify entity @n[tag=tool.ui$(id), type=chest_minecart] Items append value {Slot:20b, id:"barrier", count:1, components:{item_model: "tool:none", custom_data:{tool:{cmd:"data merge storage tool:data {global:{shader_id:'12'}}"}}, item_name:'{"text":"비네트"}'}}
$execute if data storage tool:data player[{id:$(id), shader.page:"effect"}] run data modify entity @n[tag=tool.ui$(id), type=chest_minecart] Items append value {Slot:21b, id:"barrier", count:1, components:{item_model: "tool:none", custom_data:{tool:{cmd:"data merge storage tool:data {global:{shader_id:'13'}}"}}, item_name:'{"text":"오버레이 (빨강)"}'}}
$execute if data storage tool:data player[{id:$(id), shader.page:"effect"}] run data modify entity @n[tag=tool.ui$(id), type=chest_minecart] Items append value {Slot:22b, id:"barrier", count:1, components:{item_model: "tool:none", custom_data:{tool:{cmd:"data merge storage tool:data {global:{shader_id:'14'}}"}}, item_name:'{"text":"오버레이 (초록)"}'}}
$execute if data storage tool:data player[{id:$(id), shader.page:"effect"}] run data modify entity @n[tag=tool.ui$(id), type=chest_minecart] Items append value {Slot:23b, id:"barrier", count:1, components:{item_model: "tool:none", custom_data:{tool:{cmd:"data merge storage tool:data {global:{shader_id:'15'}}"}}, item_name:'{"text":"오버레이 (파랑)"}'}}
$execute if data storage tool:data player[{id:$(id), shader.page:"effect"}] run data modify entity @n[tag=tool.ui$(id), type=chest_minecart] Items append value {Slot:24b, id:"barrier", count:1, components:{item_model: "tool:none", custom_data:{tool:{cmd:"data merge storage tool:data {global:{shader_id:'16'}}"}}, item_name:'{"text":"오버레이 (청록)"}'}}
$execute if data storage tool:data player[{id:$(id), shader.page:"effect"}] run data modify entity @n[tag=tool.ui$(id), type=chest_minecart] Items append value {Slot:25b, id:"barrier", count:1, components:{item_model: "tool:none", custom_data:{tool:{cmd:"data merge storage tool:data {global:{shader_id:'17'}}"}}, item_name:'{"text":"오버레이 (자홍)"}'}}
$execute if data storage tool:data player[{id:$(id), shader.page:"effect"}] run data modify entity @n[tag=tool.ui$(id), type=chest_minecart] Items append value {Slot:26b, id:"barrier", count:1, components:{item_model: "tool:none", custom_data:{tool:{cmd:"data merge storage tool:data {global:{shader_id:'18'}}"}}, item_name:'{"text":"오버레이 (노랑)"}'}}

# 마인카트 순간이동
$execute at @s positioned ~ ~1.5 ~ run tp @e[tag=tool.ui$(id)] ~ ~ ~